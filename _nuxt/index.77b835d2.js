import{_ as G}from"./nuxt-icon.vue.03bbcd50.js";import{s,v as I,C as J,D as K,o as u,c as d,a,I as c,J as e,F as O,r as W,t as p,b as g,w as L,T as S,K as $,L as H,M as Y}from"./entry.ae63899f.js";import{H as q}from"./Header.4decec8d.js";import"./nuxt-link.7241f8dc.js";const Q={class:"music-player"},ee=a("div",{class:"heading"},[a("h1",null,"FYE")],-1),ae={class:"audioPlayer",id:"app"},te=a("span",null,null,-1),se=a("span",null,null,-1),le=a("span",null,null,-1),oe=[te,se,le],ne=["onClick"],ie={class:"title"},ue={class:"artist"},re={class:"albumImage"},ce=["src"],de={class:"albumDetails"},ve={class:"playerButtons"},me={class:"currentTimeContainer",style:{"{\n            textAlign":"center"}},_e={class:"currentTime"},pe={class:"totalTime"},ge={class:"currentProgressBar"},ye={__name:"MusicPlayer",setup(N){const C=s(null),w=o=>{const n=C.value.getBoundingClientRect(),y=o.clientX-n.left,_=n.width,k=y/_;l.value.currentTime=l.value.duration*k},l=s(""),E=s(!1),i=s(!1),f=s(!1),h=s(0),P=s(""),b=s(0),F=s(0),v=s(!1),t=s(0),T=s(!1),A=s(""),r=s([{title:"Embers",artist:"Fye",url:"/audio/embers.mp3",image:"https://source.unsplash.com/crs2vlkSe98/400x400"},{title:"Fast lane to love",artist:"Fye",url:"/audio/2_fast_lane_to_love.mp3",image:"https://source.unsplash.com/35bE_njbG9E/400x400"},{title:"Кто споет о тебе",artist:"Fye",url:"/audio/3_кто_споёт_о_тебе.mp3",image:"https://source.unsplash.com/Esax9RaEl2I/400x400"},{title:"Lonely in gorgerous",artist:"Fye",url:"/audio/4_lonely_in_gorgeous.mp3",image:"https://source.unsplash.com/j0g8taxHZa0/400x400"},{title:"Black mirror on the wall",artist:"Fye",url:"/audio/5_black_mirror_on_the_wall.mp3",image:"https://source.unsplash.com/j0g8taxHZa0/400x400"}]),j=()=>{clearTimeout(P.value)},x=()=>{l.value.pause(),i.value=!1,j()},z=()=>{f.value==!0&&t.value+1==r.value.length&&(t.value=0,m()),i.value?x():(D(),i.value=!0,l.value.play()),f.value=!1},m=o=>{const n=i.value;E.value=!1,o!==void 0&&(x(),t.value=o),A.value=r.value[t.value].url,l.value=new Audio(A.value),l.value.addEventListener("loadedmetadata",function(){console.log("trackduration",b.value),b.value=Math.round(l.value.duration)}),l.value.addEventListener("ended",B),n&&z()},V=()=>{t.value<r.value.length-1&&m(t.value+1)},R=()=>{m(t.value-1)},U=o=>t.value==o;I(()=>{m(),l.value.loop=!1}),I(()=>{m(),l.value.loop=!1});const B=()=>{t.value+1==r.value.length?(x(),i.value=!1,f.value=!0):(i.value=!1,t.value+=1,m(),z())},X=()=>{E.value=!0},D=o=>{P.value=setTimeout(()=>{console.log("audio.value.currentTime",l.value.currentTime),h.value=l.value.currentTime,F.value=l.value.currentTime/b.value*100,D()},1e3)},Z=()=>{T.value=!T.value,document.body.classList.toggle("debug")},M=o=>(o-(o%=60))/60+(9<o?":":":0")+o;return J(()=>h.value,()=>{h.value=Math.round(h.value)}),K(()=>{l.value.removeEventListener("ended",B),l.value.removeEventListener("loadedmetadata",B),clearTimeout(P.value)}),(o,n)=>{const y=G;return u(),d("div",Q,[ee,a("div",ae,[a("a",{class:c(["nav-icon",{isActive:e(v)}]),onClick:n[0]||(n[0]=_=>v.value=!e(v)),title:"Music List"},oe,2),a("div",{class:c(["audioPlayerList",{isActive:e(v)}])},[(u(!0),d(O,null,W(e(r),(_,k)=>(u(),d("div",{class:c(["item",{isActive:U(k)}]),key:k,onClick:he=>(m(k),v.value=!e(v))},[a("p",ie,p(_.title),1),a("p",ue,p(_.artist),1)],10,ne))),128)),a("p",{class:"debugToggle",onClick:n[1]||(n[1]=_=>Z())},"debug: "+p(e(T)),1)],2),a("div",{class:c(["audioPlayerUI",{isDisabled:e(v)}])},[a("div",re,[g(S,{name:"ballmove","enter-active-class":"animated zoomIn","leave-active-class":"animated fadeOutDown",mode:"out-in"},{default:L(()=>[(u(),d("img",{onLoad:n[2]||(n[2]=_=>X()),src:e(r)[e(t)].image,key:e(t),ondragstart:"return false;",id:"playerAlbumArt"},null,40,ce))]),_:1}),(u(),d("div",{class:"loader",key:e(t)},"Loading..."))]),a("div",de,[g(S,{name:"slide-fade",mode:"out-in"},{default:L(()=>[(u(),d("p",{class:"title",key:e(t)},p(e(r)[e(t)].title),1))]),_:1}),g(S,{name:"slide-fade",mode:"out-in"},{default:L(()=>[(u(),d("p",{class:"artist",key:e(t)},p(e(r)[e(t)].artist),1))]),_:1})]),a("div",ve,[a("a",{class:c(["button",{isDisabled:e(t)==0}]),onClick:R,title:"Previous Song"},[g(y,{class:"zmdi zmdi-skip-previous",name:"player-back"})],2),a("a",{class:"button play",onClick:z,title:"Play/Pause Song"},[e(i)?H("",!0):(u(),$(y,{key:0,class:c([[e(f)?"zmdi-stop":e(i)?"zmdi-pause-circle":"zmdi-play-circle"],"zmdi"]),name:"player-playy"},null,8,["class"])),e(i)?(u(),$(y,{key:1,class:c([[e(f)?"zmdi-stop":e(i)?"zmdi-pause-circle":"zmdi-play-circle"],"zmdi"]),name:"player-pause"},null,8,["class"])):H("",!0)]),a("a",{class:c(["button",{isDisabled:e(t)==e(r).length-1}]),onClick:V,title:"Next Song"},[g(y,{class:"zmdi",name:"player-next"})],2)]),a("div",me,[a("div",_e,p(M(e(h))),1),a("div",pe,p(M(e(b))),1)]),a("div",{class:"currentProgressBar-wrapper",ref_key:"progressBar",ref:C,onClick:w},[a("div",ge,[a("div",{class:"currentProgress",style:Y({width:`${e(F)}%`})},null,4)])],512)],2)])])}}},fe=ye,Te={__name:"index",setup(N){return s([{title:"fast_lane_to_love",file:"/audio/2_fast_lane_to_love.mp3",howl:null,author:"Cherrystones"},{title:"/audio/embers.mp3",file:"/audio/embers.mp3",howl:null,author:"Cherrystones"}]),s(null),(C,w)=>(u(),d("div",null,[g(q),g(fe)]))}};export{Te as default};
